---
import Layout from "../layouts/Layout.astro";
import Navbar from "../components/Navbar.astro";
import HeroSection from "../components/HeroSection.astro";
import AboutSection from "../components/AboutSection.astro";
import ProjectsSection from "../components/Projects/ProjectsSection.astro";
import ContactSection from "../components/ContactSection.astro";
import Footer from "../components/Footer.astro";
---

<Layout title="Full Stack Developer Portfolio">
  <Navbar />
  <main>
    <HeroSection />
    <AboutSection />
    <ProjectsSection />
    <ContactSection />
  </main>
  <Footer />
</Layout>

<script>
  // Import GSAP for global animation settings
  import { gsap } from "gsap";
  import { ScrollToPlugin } from "gsap/ScrollToPlugin";

  // Register ScrollToPlugin
  gsap.registerPlugin(ScrollToPlugin);

  // Global page transition animation
  window.addEventListener("load", () => {
    gsap.to("body", {
      opacity: 1,
      duration: 0.5,
      ease: "power2.out",
    });
  });

  // Smooth scroll for anchor links
  document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
    anchor.addEventListener("click", function (e) {
      e.preventDefault();

      const targetId = this.getAttribute("href");
      if (targetId === "#") return;

      const target = document.querySelector(targetId);
      if (target) {
        gsap.to(window, {
          scrollTo: {
            y: target,
            offsetY: 80,
            autoKill: false,
          },
          ease: "power3.inOut",
        });
      }
    });
  });
</script>

<style>
  /* Page load animation */
  body {
    opacity: 0;
  }
</style>
